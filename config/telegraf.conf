# ——— Z-Wave ————
[[inputs.mqtt_consumer]]
  servers = ["tcp://mosquitto:1883"]
  topics  = ["zwave/#"]
  client_id = "telegraf-zwave"
  qos = 1
  data_format = "json_v2"

  [[inputs.mqtt_consumer.json_v2]]
    measurement_name = "sensor_data"
    [[inputs.mqtt_consumer.json_v2.field]]
      path = "Luminance"
      rename = "luminance"
      type = "float"
    [[inputs.mqtt_consumer.json_v2.field]]
      path = "Ultraviolet"
      rename = "ultraviolet"
      type = "float"

# ——— Plugwise ————
[[inputs.mqtt_consumer]]
  servers = ["tcp://mosquitto:1883"]
  topics  = ["plugwise/status/+"]
  client_id = "telegraf-plugwise"
  qos = 1
  data_format = "json_v2"

  [[inputs.mqtt_consumer.json_v2]]
    measurement_name = "plugwise_power"
    timestamp_path   = "time"
    timestamp_format = "2006-01-02T15:04:05.000000"
    [[inputs.mqtt_consumer.json_v2.field]]
      path = "power"
      type = "float"

###############################################################################
#  输出到 InfluxDB v2
###############################################################################
[[outputs.influxdb_v2]]
  urls          = ["http://influxdb:8086"]
  token         = "$INFLUX_TOKEN"
  bucket        = "zwave"
  organization  = "zwave"
